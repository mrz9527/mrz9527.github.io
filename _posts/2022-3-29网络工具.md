# 测试对方ip

## ping

测试对方ip是否存在，如果对方禁止ICMP协议，也会ping不通的；
测试网速：看网络延时；
解析域名: 域名转ip。

```
常见命令参数
-q 不显示任何传送封包的信息，只显示最后的结果
-n 只输出数值
-R 记录路由过程
-c count 总次数
-i 时间间隔
-t 存活数值：设置存活数值TTL的大小
-s 设置发送包的大小。默认情况下，ping命令是以64字节大小的数据包来测试网络连通性
```

```sh
# 域名转ip
$ ping -c 2 www.baidu.com
PING www.a.shifen.com (220.181.38.150): 56 data bytes
64 bytes from 220.181.38.150: icmp_seq=0 ttl=44 time=5.874 ms
64 bytes from 220.181.38.150: icmp_seq=1 ttl=44 time=9.107 ms
```

```sh
# ping对方主机，发送4个包，每个包间隔1秒
$ ping -c 4 -i 1 10.10.10.221
PING 10.10.10.221 (10.10.10.221): 56 data bytes
64 bytes from 10.10.10.221: icmp_seq=0 ttl=64 time=0.447 ms
64 bytes from 10.10.10.221: icmp_seq=1 ttl=64 time=0.802 ms
64 bytes from 10.10.10.221: icmp_seq=2 ttl=64 time=0.681 ms
64 bytes from 10.10.10.221: icmp_seq=3 ttl=64 time=0.597 ms
--- 10.10.10.221 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.447/0.632/0.802/0.129 ms
```

```sh
# -s 选项来发现网络环境中有关MTU（网络上传最大的数据包）的问题
$ ping -c 4 -i 1 -s 40 10.10.10.221
PING 10.10.10.221 (10.10.10.221): 40 data bytes
48 bytes from 10.10.10.221: icmp_seq=0 ttl=64 time=0.354 ms
48 bytes from 10.10.10.221: icmp_seq=1 ttl=64 time=0.587 ms
48 bytes from 10.10.10.221: icmp_seq=2 ttl=64 time=0.399 ms
48 bytes from 10.10.10.221: icmp_seq=3 ttl=64 time=0.422 ms
--- 10.10.10.221 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.354/0.440/0.587/0.088 ms
```

```sh
# -s 发送8192个字节数据，发送失败，包过大
$ ping -c 4 -i 1 -s 8192 10.10.10.221
PING 10.10.10.221 (10.10.10.221): 8192 data bytes
ping: sending packet: Message too long
```

测试对方端口

## telnet

测试对方端口是否打开。
**netstat也可以查看端口，但局限于本机。**

```sh
# 22端口存在
$ telnet 10.10.10.221 22
Trying 10.10.10.221...
Connected to 10.10.10.221.
Escape character is '^]'.
SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.10
```

```sh
# 5005端口不存在
$ telnet 10.10.10.221 5005
Trying 10.10.10.221...
telnet: Unable to connect to remote host: Connection refused
```

